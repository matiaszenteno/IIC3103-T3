(this["webpackJsonpsocket-react-app"]=this["webpackJsonpsocket-react-app"]||[]).push([[0],{51:function(e,t,n){"use strict";n.r(t);var s=n(20),c=n(9),i=n(47),a=n(43),r=n(44),o=n(13),l=n(49),j=n(48),h=n(0),b=n.n(h),d=n(22),m=n.n(d),u=n(46),O=n.n(u),p=(n(87),n(3)),f=n.n(p),g=n(89),x=n(92),k=n(90),N=n(91),v=n(1);delete f.a.Icon.Default.prototype._getIconUrl,f.a.Icon.Default.mergeOptions({className:"icon"});var C=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(e){var s;return Object(a.a)(this,n),(s=t.call(this,e)).setCurrentNickname=function(e){s.setState({current_nickname:e})},s.setNickname=function(){s.setState({nickname:s.state.current_nickname})},s.setCurrentMessage=function(e){s.setState({current_message:e})},s.sendMessage=function(){if(s.state.nickname){var e=s.state.current_message,t={name:s.state.nickname,message:e};s.socket.emit("CHAT",t)}},s.state={nickname:"",current_nickname:"",current_message:"",messages:[],flights:[],positions:{},paths:{}},s.setCurrentNickname=s.setCurrentNickname.bind(Object(o.a)(s)),s.setNickname=s.setNickname.bind(Object(o.a)(s)),s.setCurrentMessage=s.setCurrentMessage.bind(Object(o.a)(s)),s}return Object(r.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.socket=O.a.connect("wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl",{path:"/flights/",transports:["websocket"]}),this.socket.on("CHAT",(function(t){e.setState({messages:[].concat(Object(i.a)(e.state.messages),[t])})})),this.socket.on("FLIGHTS",(function(t){e.setState({flights:t})})),this.socket.on("POSITION",(function(t){e.setState((function(e){return{positions:Object(c.a)(Object(c.a)({},e.positions),{},Object(s.a)({},t.code,t.position))}})),e.socket.emit("FLIGHTS",{})}))}},{key:"render",value:function(){var e=this,t=this.state.messages.map((function(e,t){return Object(v.jsx)("li",{children:Object(v.jsxs)("b",{children:[e.name,": ",e.message]})},t)})),n=this.state.flights.map((function(e,t){return Object(v.jsx)("li",{children:Object(v.jsxs)("div",{className:"flight-info",children:[Object(v.jsx)("p",{className:"flight-info-line",children:Object(v.jsxs)("b",{children:["VUELO ",e.code]})}),Object(v.jsxs)("p",{className:"flight-info-line",children:[Object(v.jsx)("b",{children:"Aerol\xednea:"})," ",e.airline]}),Object(v.jsxs)("p",{className:"flight-info-line",children:[Object(v.jsx)("b",{children:"Origen:"})," ",e.origin]}),Object(v.jsxs)("p",{className:"flight-info-line",children:[Object(v.jsx)("b",{children:"Destino:"})," ",e.destination]}),Object(v.jsxs)("p",{className:"flight-info-line",children:[Object(v.jsx)("b",{children:"Avi\xf3n:"})," ",e.plane]}),Object(v.jsxs)("p",{className:"flight-info-line",children:[Object(v.jsx)("b",{children:"Asientos:"})," ",e.seats]}),Object(v.jsx)("p",{className:"flight-info-line",children:Object(v.jsx)("b",{children:"Pasajeros:"})}),e.passengers.map((function(e,t){return Object(v.jsxs)("p",{children:[e.name,", ",e.age," a\xf1os."]},t)}))]})},t)}));return Object(v.jsxs)("div",{children:[Object(v.jsx)("div",{className:"title-container",children:Object(v.jsx)("h1",{children:"Informaci\xf3n Vuelos"})}),Object(v.jsxs)("div",{className:"general-container",children:[Object(v.jsxs)("div",{className:"base-container",children:[Object(v.jsx)("div",{className:"map-container",children:Object(v.jsx)("div",{children:Object(v.jsxs)(g.a,{className:"map",zoom:5,center:[-30,-70],children:[Object(v.jsx)(x.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object.keys(this.state.positions).map((function(t,n){return Object(v.jsx)(k.a,{position:e.state.positions[t],children:Object(v.jsx)(N.a,{children:t})},t)}))]})})}),Object(v.jsxs)("div",{className:"chat-container",children:[Object(v.jsx)("h2",{children:"Centro de Control"}),Object(v.jsxs)("div",{className:"nickname-container",children:[Object(v.jsx)("input",{type:"text",placeholder:"Ingresa tu nombre",onChange:function(t){return e.setCurrentNickname(t.target.value)}}),Object(v.jsx)("button",{onClick:function(){return e.setNickname()},children:"Ingresar"})]}),Object(v.jsxs)("div",{className:"messages-container",children:[Object(v.jsxs)("div",{className:"messages-input-container",children:[Object(v.jsx)("input",{type:"text",placeholder:"Ingresa tu mensaje",onChange:function(t){return e.setCurrentMessage(t.target.value)}}),Object(v.jsx)("button",{onClick:function(){return e.sendMessage()},children:"Enviar"})]}),t]})]})]}),Object(v.jsx)("div",{className:"info-container",children:Object(v.jsx)("div",{className:"flights-info",children:n})})]})]})}}]),n}(b.a.Component);m.a.render(Object(v.jsx)(C,{}),document.getElementById("root"))},87:function(e,t,n){}},[[51,1,2]]]);
//# sourceMappingURL=main.1edfe224.chunk.js.map